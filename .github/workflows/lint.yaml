name: Lint

on: [push, pull_request]

jobs:
  lint:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v3

    - name: Set up PHP
      uses: shivammathur/setup-php@v2
      with:
        php-version: '8.3.8'

    - name: Install linters
      run: |
        composer global require "squizlabs/php_codesniffer=*"
        composer global require phpmd/phpmd
        composer global require phpstan/phpstan
        echo "$HOME/.composer/vendor/bin" >> $GITHUB_PATH

    - name: Run PHP_CodeSniffer
      run: |
        phpcs --standard=PSR12 web

    - name: Run PHPMD
      run: |
        phpmd web text codesize,unusedcode,naming

    - name: Run PHPStan
      run: |
        phpstan analyse web
